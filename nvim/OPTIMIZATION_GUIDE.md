# Neovim é…ç½®ä¼˜åŒ–æŒ‡å—

## ğŸ“‹ æ”¹è¿›æ‘˜è¦

æœ¬æ¬¡ä¼˜åŒ–æå‡äº†é…ç½®çš„**å¯ç»´æŠ¤æ€§**ã€**å¯æ‰©å±•æ€§**å’Œ**çµæ´»æ€§**ï¼Œä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š

### âœ¨ æ–°å¢åŠŸèƒ½æ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| æ’ä»¶ç®¡ç†å™¨ | `config/plugin_manager.lua` | åˆ†ç»„ç®¡ç†æ’ä»¶ï¼Œæ”¯æŒæŒ‰éœ€å¯ç”¨/ç¦ç”¨ |
| é¢„è®¾ç³»ç»Ÿ | `config/presets.lua` | å¿«é€Ÿåˆ‡æ¢ä¸åŒä½¿ç”¨åœºæ™¯çš„é…ç½® |
| é”®ä½ç®¡ç†å™¨ | `config/keymaps.lua` | ç»Ÿä¸€ç®¡ç†è‡ªå®šä¹‰é”®ä½æ˜ å°„ |
| é…ç½®éªŒè¯å™¨ | `config/validator.lua` | å¯åŠ¨æ—¶æ£€æŸ¥é…ç½®ä¸€è‡´æ€§ |

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. æ’ä»¶åˆ†ç»„ç®¡ç†

**é—®é¢˜**ï¼šåŸ `community.lua` æ–‡ä»¶è¿‡é•¿ï¼ˆ189è¡Œï¼‰ï¼Œæ’ä»¶æ··åœ¨ä¸€èµ·éš¾ä»¥ç®¡ç†

**è§£å†³æ–¹æ¡ˆ**ï¼šæ’ä»¶æŒ‰**ç”¨é€”åˆ†ç»„**ï¼Œæ”¯æŒ**æ¡ä»¶åŠ è½½**

```lua
-- ç¤ºä¾‹ï¼šåªå¯ç”¨å‰ç«¯å¼€å‘ç›¸å…³æ’ä»¶
local config = {
  disable_languages = {
    backend = true, -- ç¦ç”¨åç«¯è¯­è¨€åŒ…
    devops = true,
  }
}

local plugins = require("config.plugin_manager").build_plugin_list(config)
```

**åˆ†ç»„ç»“æ„**ï¼š
- `language_packs` - è¯­è¨€åŒ…ï¼ˆå‰ç«¯/åç«¯/è„šæœ¬ç­‰ï¼‰
- `editor_features` - ç¼–è¾‘å™¨åŠŸèƒ½ï¼ˆè¡¥å…¨/ç¼–è¾‘/ç§»åŠ¨/Gitç­‰ï¼‰
- `workflow_tools` - å·¥ä½œæµå·¥å…·ï¼ˆæœç´¢/è°ƒè¯•/æµ‹è¯•ç­‰ï¼‰

---

### 2. é…ç½®é¢„è®¾ç³»ç»Ÿ

**é—®é¢˜**ï¼šä¸åŒåœºæ™¯éœ€è¦ä¸åŒé…ç½®ï¼Œä½†æ¯æ¬¡æ‰‹åŠ¨ä¿®æ”¹éº»çƒ¦

**è§£å†³æ–¹æ¡ˆ**ï¼šé¢„å®šä¹‰å¤šä¸ªåœºæ™¯é…ç½®ï¼Œä¸€é”®åˆ‡æ¢

#### å¯ç”¨é¢„è®¾

| é¢„è®¾ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `minimal` | æœ€å°åŒ–é…ç½® | å¿«é€Ÿå¯åŠ¨ã€ç¼–è¾‘é…ç½®æ–‡ä»¶ |
| `frontend` | å‰ç«¯å¼€å‘ | JS/TS/Vue å¼€å‘ |
| `backend` | åç«¯å¼€å‘ | Rust/Go/Python å¼€å‘ |
| `fullstack` | å…¨æ ˆå¼€å‘ | é»˜è®¤ï¼Œæ‰€æœ‰åŠŸèƒ½ |
| `performance` | æ€§èƒ½æ¨¡å¼ | ä½é…æœºå™¨ï¼Œå‡å°‘æ’ä»¶ |

#### åˆ‡æ¢é¢„è®¾

**æ–¹æ³• 1ï¼šä½¿ç”¨å‘½ä»¤ï¼ˆæ¨èï¼‰**
```vim
:lua require("config.presets").switch_to("frontend")
" ç„¶åé‡å¯ Neovim
```

**æ–¹æ³• 2ï¼šç¯å¢ƒå˜é‡**
```bash
# Linux/macOS
export NVIM_PRESET=frontend
nvim

# Windows PowerShell
$env:NVIM_PRESET="frontend"
nvim
```

**æ–¹æ³• 3ï¼šé…ç½®æ–‡ä»¶**
```bash
echo "frontend" > ~/.config/nvim/.preset
```

---

### 3. é”®ä½æ˜ å°„ç®¡ç†

**é—®é¢˜**ï¼šé”®ä½åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ï¼Œéš¾ä»¥æŸ¥æ‰¾å’Œé¿å…å†²çª

**è§£å†³æ–¹æ¡ˆ**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰è‡ªå®šä¹‰é”®ä½

#### æŸ¥çœ‹æ‰€æœ‰é”®ä½
```vim
:lua require("config.keymaps").print_docs()
```

#### ä¿®æ”¹é”®ä½
ç¼–è¾‘ `config/keymaps.lua`ï¼ŒæŒ‰åˆ†ç±»æ·»åŠ ï¼š

```lua
-- æ·»åŠ æ–°çš„æ–‡ä»¶æ“ä½œé”®ä½
M.file["<Leader>w"] = {
  cmd = ":w<CR>",
  desc = "Save file",
  modes = { "n" }
}
```

#### è‡ªåŠ¨åº”ç”¨
åœ¨ `plugins/astrocore.lua` ä¸­ï¼š

```lua
opts.mappings = require("config.keymaps").build_mappings()
```

---

### 4. é…ç½®éªŒè¯å™¨

**é—®é¢˜**ï¼šé…ç½®é”™è¯¯éš¾ä»¥å‘ç°ï¼Œå¯åŠ¨åæ‰æŠ¥é”™

**è§£å†³æ–¹æ¡ˆ**ï¼šè‡ªåŠ¨æ£€æŸ¥å¸¸è§é—®é¢˜

#### è‡ªåŠ¨éªŒè¯
åœ¨ `polish.lua` ä¸­å¯ç”¨ï¼š

```lua
local validator = require("config.validator")
validator.auto_validate()
```

#### æ‰‹åŠ¨æ£€æŸ¥
```vim
:lua require("config.validator").display_report(require("config.validator").run_all_checks())
```

#### æ£€æŸ¥é¡¹
- âœ“ å¤–éƒ¨ä¾èµ–ï¼ˆgit, rg, fdï¼‰
- âœ“ æ’ä»¶å†²çªï¼ˆå¤šä¸ªæ ¼å¼åŒ–å·¥å…·ï¼‰
- âœ“ é…ç½®æ–‡ä»¶å®Œæ•´æ€§
- âœ“ æ€§èƒ½è®¾ç½®

---

## ğŸ“¦ è¿ç§»æ­¥éª¤

### é€‰é¡¹ Aï¼šæ¸è¿›å¼è¿ç§»ï¼ˆæ¨èï¼‰

ä¿ç•™åŸé…ç½®ï¼Œé€æ­¥å¼•å…¥æ–°æ¨¡å—ï¼š

```lua
-- 1. åœ¨ plugins/astrocore.lua ä¸­ä½¿ç”¨é”®ä½ç®¡ç†å™¨
opts.mappings = require("config.keymaps").build_mappings()

-- 2. åœ¨ polish.lua ä¸­å¯ç”¨éªŒè¯å™¨
require("config.validator").auto_validate()

-- 3. æµ‹è¯•æ–°åŠŸèƒ½ï¼Œç¡®è®¤æ— è¯¯åç»§ç»­
```

### é€‰é¡¹ Bï¼šå®Œå…¨è¿ç§»

ç›´æ¥ä½¿ç”¨æ–°çš„é…ç½®ç³»ç»Ÿï¼š

```lua
-- lazy_setup.lua
{ import = "community_v2" }, -- æ›¿æ¢åŸæ¥çš„ "community"
```

---

## ğŸ¯ æ¶æ„æ”¹è¿›

### Beforeï¼ˆåŸæ¶æ„ï¼‰

```
lua/
â”œâ”€â”€ community.lua (189 è¡Œï¼Œæ··åˆæ‰€æœ‰æ’ä»¶)
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ astrocore.lua (é”®ä½æ˜ å°„å†…è”)
â”‚   â”œâ”€â”€ astrolsp.lua
â”‚   â””â”€â”€ ...
â””â”€â”€ config/
    â”œâ”€â”€ constants.lua
    â””â”€â”€ ...
```

**é—®é¢˜**ï¼š
- âŒ æ’ä»¶é…ç½®æ··åœ¨ä¸€èµ·
- âŒ é”®ä½æ˜ å°„åˆ†æ•£
- âŒ æ— æ³•æŒ‰éœ€åŠ è½½
- âŒ éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•

### Afterï¼ˆä¼˜åŒ–åï¼‰

```
lua/
â”œâ”€â”€ community.lua (ä¿ç•™åŸç‰ˆ)
â”œâ”€â”€ community_v2.lua (æ–°ç‰ˆï¼Œæ¨¡å—åŒ–)
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ ...
â””â”€â”€ config/
    â”œâ”€â”€ plugin_manager.lua (æ’ä»¶åˆ†ç»„ç®¡ç†)
    â”œâ”€â”€ presets.lua (é…ç½®é¢„è®¾)
    â”œâ”€â”€ keymaps.lua (é”®ä½ç®¡ç†)
    â”œâ”€â”€ validator.lua (é…ç½®éªŒè¯)
    â””â”€â”€ ...
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£æ¸…æ™°
- âœ… æ”¯æŒé¢„è®¾ï¼Œå¿«é€Ÿåˆ‡æ¢
- âœ… é”®ä½ç»Ÿä¸€ç®¡ç†
- âœ… è‡ªåŠ¨éªŒè¯é…ç½®
- âœ… æ˜“äºæ‰©å±•å’Œç»´æŠ¤

---

## ğŸ” ä»£ç è´¨é‡æå‡

### ç±»å‹æ³¨è§£
æ‰€æœ‰æ–°æ¨¡å—éƒ½æ·»åŠ äº† LSP ç±»å‹æ³¨è§£ï¼š

```lua
---@param preset_name string é¢„è®¾åç§°
---@return table config é¢„è®¾é…ç½®
function M.apply(preset_name)
  -- ...
end
```

### æ–‡æ¡£å­—ç¬¦ä¸²
å‡½æ•°éƒ½æœ‰æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜ï¼š

```lua
--- æ„å»ºå®Œæ•´çš„æ’ä»¶åˆ—è¡¨
---@param config table? è‡ªå®šä¹‰é…ç½®ï¼ˆå¯é€‰ï¼‰
---@return table plugins æ’ä»¶åˆ—è¡¨
function M.build_plugin_list(config)
```

### é”™è¯¯å¤„ç†
å¢å¼ºçš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤ºï¼š

```lua
if not preset then
  vim.notify(
    string.format("Preset '%s' not found, using 'fullstack'", preset_name),
    vim.log.levels.WARN
  )
  return M.fullstack
end
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ä½¿ç”¨é¢„è®¾å‡å°‘æ’ä»¶æ•°é‡
```lua
-- ä½¿ç”¨ minimal é¢„è®¾å¯å‡å°‘çº¦ 50% çš„æ’ä»¶
```

### 2. å»¶è¿ŸåŠ è½½
```lua
-- æ’ä»¶ç®¡ç†å™¨æ”¯æŒæŒ‰éœ€åŠ è½½
{ 
  "plugin_name",
  lazy = true,
  ft = { "typescript", "javascript" }
}
```

### 3. ç¦ç”¨ä¸éœ€è¦çš„åŠŸèƒ½
```lua
local config = {
  disable_tools = {
    debugging = true, -- ä¸éœ€è¦è°ƒè¯•åŠŸèƒ½æ—¶ç¦ç”¨
  }
}
```

---

## ğŸ› ï¸ æ‰©å±•ç¤ºä¾‹

### æ·»åŠ æ–°çš„è¯­è¨€åŒ…åˆ†ç»„

```lua
-- config/plugin_manager.lua
M.language_packs.mobile = {
  { import = "astrocommunity.pack.kotlin" },
  { import = "astrocommunity.pack.dart" },
}
```

### åˆ›å»ºè‡ªå®šä¹‰é¢„è®¾

```lua
-- config/presets.lua
M.mobile_dev = {
  disable_languages = {
    backend = true,
    frontend = true,
  },
  -- åªå¯ç”¨ mobile åˆ†ç»„
}
```

### æ·»åŠ é”®ä½æ˜ å°„åˆ†ç±»

```lua
-- config/keymaps.lua
M.custom = {
  ["<Leader>x"] = {
    cmd = ":CustomCommand<CR>",
    desc = "My custom command"
  }
}
```

---

## â“ FAQ

**Q: æ–°ç³»ç»Ÿä¼šå½±å“ç°æœ‰é…ç½®å—ï¼Ÿ**  
A: ä¸ä¼šã€‚æ–°æ¨¡å—æ˜¯**å¯é€‰çš„**ï¼Œå¯ä»¥æ¸è¿›å¼è¿ç§»ã€‚

**Q: å¦‚ä½•å›é€€åˆ°åŸé…ç½®ï¼Ÿ**  
A: åˆ é™¤ `.preset` æ–‡ä»¶ï¼Œä½¿ç”¨ `{ import = "community" }` è€Œé `community_v2`ã€‚

**Q: é¢„è®¾åˆ‡æ¢éœ€è¦é‡å¯å—ï¼Ÿ**  
A: æ˜¯çš„ï¼Œé¢„è®¾åˆ‡æ¢ä¼šæ”¹å˜æ’ä»¶åŠ è½½ï¼Œéœ€è¦é‡å¯ Neovimã€‚

**Q: èƒ½å¦è‡ªå®šä¹‰é¢„è®¾ï¼Ÿ**  
A: å¯ä»¥åœ¨ `config/presets.lua` ä¸­æ·»åŠ æ–°çš„é¢„è®¾é…ç½®ã€‚

---

## ğŸ“š å‚è€ƒèµ„æº

- [AstroNvim æ–‡æ¡£](https://docs.astronvim.com/)
- [Lazy.nvim æ–‡æ¡£](https://lazy.folke.io/)
- [æœ¬é…ç½® README](./README.md)

---

## ğŸ‰ æ€»ç»“

é€šè¿‡æœ¬æ¬¡ä¼˜åŒ–ï¼Œä½ çš„ Neovim é…ç½®ç°åœ¨å…·å¤‡ï¼š

- âœ… **æ›´å¥½çš„ç»„ç»‡ç»“æ„** - æ¨¡å—åŒ–ã€åˆ†ç»„æ¸…æ™°
- âœ… **çµæ´»çš„é…ç½®æ–¹å¼** - é¢„è®¾ç³»ç»Ÿã€æŒ‰éœ€åŠ è½½
- âœ… **ç»Ÿä¸€çš„é”®ä½ç®¡ç†** - é›†ä¸­ç®¡ç†ã€é¿å…å†²çª
- âœ… **è‡ªåŠ¨åŒ–éªŒè¯** - å¯åŠ¨æ£€æŸ¥ã€åŠæ—©å‘ç°é—®é¢˜
- âœ… **æ˜“äºæ‰©å±•** - æ¸…æ™°çš„ APIã€ç±»å‹æ³¨è§£
- âœ… **å®Œå–„çš„æ–‡æ¡£** - è¯¦ç»†è¯´æ˜ã€ä»£ç æ³¨é‡Š

**å»ºè®®**ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒå°è¯•æ–°åŠŸèƒ½ï¼Œç¡®è®¤æ— è¯¯åå†åº”ç”¨åˆ°ä¸»é…ç½®ã€‚
