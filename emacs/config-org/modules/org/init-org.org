* init-org.el
:PROPERTIES:
:HEADER-ARGS: :tangle init-org.el :lexical t
:END:

** Headers
#+BEGIN_SRC emacs-lisp
  ;;; init-org.el --- Org Mode Configuration for MCG Emacs -*- lexical-binding: t; -*-

  ;; Filename: init-org.el
  ;; Description: Org Mode configuration module
  ;; Author: mcge <mcgeq@outlook.com>
  ;; Copyright (C) 2024-2026, mcge, all rights reserved.
  ;; Create   Date: 2026-01-07
  ;; Version: 3.0
  ;; Keywords: org, notes, productivity
  ;; Compatibility: GNU Emacs 29.0+

  ;;; Commentary:
  ;;
  ;; Org Mode configuration module for MCG Emacs, responsible for:
  ;; - Org mode basic settings
  ;; - TODO keywords and state configuration
  ;; - Appearance beautification (org-superstar, org-appear)
  ;; - org-modern modern interface
  ;; - org-download image download
  ;; - Chinese calendar integration
  ;; - Symbol beautification
  ;;
  ;; Module metadata:
  ;; :depends ()
  ;; :defer nil
  ;;

#+END_SRC

** Dependencies
#+BEGIN_SRC emacs-lisp
  ;;; Dependencies

  (require 'core-lib)
  (require 'org)
  (require 'ox)

#+END_SRC

** Variables
#+BEGIN_SRC emacs-lisp
  ;;; Variables

  (defgroup mcg-org nil
    "Org mode configuration variables."
    :group 'org
    :prefix "mcg-org-")

  ;;; Basic directory configuration
  (defcustom mcg-org-directory
    (expand-file-name "~/org")
    "Root directory for Org mode files."
    :type 'directory
    :group 'mcg-org)

  (defcustom mcg-org-agenda-directory
    (expand-file-name "agenda" mcg-org-directory)
    "Org agenda files directory."
    :type 'directory
    :group 'mcg-org)

  (defcustom mcg-org-notes-directory
    (expand-file-name "notes" mcg-org-directory)
    "Org notes files directory."
    :type 'directory
    :group 'mcg-org)

  (defcustom mcg-org-blog-directory
    (expand-file-name "blog" mcg-org-directory)
    "Blog related Org files directory."
    :type 'directory
    :group 'mcg-org)

  (defcustom mcg-org-archive-directory
    (expand-file-name "archive" mcg-org-directory)
    "Org archive files directory."
    :type 'directory
    :group 'mcg-org)


  ;;; Main file paths
  (defcustom mcg-org-default-notes-file
    (expand-file-name "notes.org" mcg-org-notes-directory)
    "Default notes file."
    :type 'file
    :group 'mcg-org)

  (defcustom mcg-org-task-file
    (expand-file-name "tasks.org" mcg-org-agenda-directory)
    "Task file."
    :type 'file
    :group 'mcg-org)

  ;;; Feature toggles
  (defcustom mcg-org-enable-pretty-symbols t
    "Whether to enable Org mode symbol beautification."
    :type 'boolean
    :group 'mcg-org)

  (defcustom mcg-org-enable-mixed-pitch nil
    "Whether to enable mixed fonts (serif + monospace)."
    :type 'boolean
    :group 'mcg-org)

  (defcustom mcg-org-enable-visual-fill nil
    "Whether to enable visual fill column."
    :type 'boolean
    :group 'mcg-org)

  (defcustom mcg-org-enable-chinese-calendar t
    "Whether to enable Chinese calendar."
    :type 'boolean
    :group 'mcg-org)

  (defcustom mcg-org-enable-org-modern t
    "Whether to enable org-modern modern interface."
    :type 'boolean
    :group 'mcg-org)

  (defcustom mcg-org-visual-fill-width 88
    "Visual fill column width."
    :type 'integer
    :group 'mcg-org)

#+END_SRC

** Directory Helpers
#+BEGIN_SRC emacs-lisp
  ;;; Directory Helpers

  (defun mcg-org-ensure-directory (dir)
    "Ensure directory DIR exists, create if not."
    (unless (file-exists-p dir)
      (make-directory dir t)
      (mcg-log "Created directory: %s" dir)))

  (defun mcg-org-initialize-directories ()
    "Initialize all Org mode directories."
    (interactive)
    (mapc #'mcg-org-ensure-directory
          (list mcg-org-directory
                mcg-org-agenda-directory
                mcg-org-notes-directory
                mcg-org-blog-directory
                mcg-org-archive-directory)))

#+END_SRC

** Basic Settings
#+BEGIN_SRC emacs-lisp
  ;;; Basic Settings

  (defun mcg-org-setup-basic ()
    "Setup Org mode basic configuration."
    (setq org-ellipsis " â­"
          org-tags-column 0
          org-log-into-drawer t
          org-pretty-entities t
          org-startup-indented t
          org-hide-leading-stars nil
          org-hide-emphasis-markers t
          org-image-actual-width '(800)
          org-startup-with-inline-images t
          org-indent-mode-turns-on-hiding-stars nil)

    ;; Record time when completing tasks
    (setq org-log-done 'time)

    ;; Log recording configuration
    (setq org-log-repeat 'time
          org-log-redeadline 'note
          org-log-reschedule 'note
          org-log-into-drawer t
          org-log-state-notes-insert-after-drawers nil)

    (mcg-log "Configured org basic settings"))

#+END_SRC


** TODO Keywords
#+BEGIN_SRC emacs-lisp
  ;;; TODO Keywords

  (defun mcg-org-setup-todo-keywords ()
    "Setup TODO keywords and states."
    ;; TODO keywords settings
    (setq org-todo-keywords '((sequence
                               "TODO(t)"
                               "HOLD(h!)"
                               "WIP(i!)"
                               "WAIT(w!)"
                               "|"
                               "DONE(d!)"
                               "CANCELLED(c@/!)")
                              (sequence
                               "REPORT(r)"
                               "BUG(b)"
                               "KNOWNCAUSE(k)"
                               "|"
                               "FIXED(f!)")))

    ;; TODO keyword face settings
    (setq org-todo-keyword-faces '(("TODO"       :foreground "#7c7c75" :weight bold)
                                   ("HOLD"       :foreground "#feb24c" :weight bold)
                                   ("WIP"        :foreground "#0098dd" :weight bold)
                                   ("WAIT"       :foreground "#9f7efe" :weight bold)
                                   ("DONE"       :foreground "#50a14f" :weight bold)
                                   ("CANCELLED"  :foreground "#ff6480" :weight bold)
                                   ("REPORT"     :foreground "magenta" :weight bold)
                                   ("BUG"        :foreground "red"     :weight bold)
                                   ("KNOWNCAUSE" :foreground "yellow"  :weight bold)
                                   ("FIXED"      :foreground "green"   :weight bold)))

    ;; Tag sync on state change
    (setq org-todo-state-tags-triggers
          (quote (("CANCELLED" ("CANCELLED" . t))
                  ("WAIT" ("WAIT" . t))
                  ("HOLD" ("WAIT") ("HOLD" . t))
                  (done ("WAIT") ("HOLD"))
                  ("TODO" ("WAIT") ("CANCELLED") ("HOLD"))
                  ("DONE" ("WAIT") ("CANCELLED") ("HOLD")))))

    (mcg-log "Configured org TODO keywords"))

#+END_SRC

** Appearance
#+BEGIN_SRC emacs-lisp
  ;;; Appearance

  (defun mcg-org-setup-appearance ()
    "Setup Org mode appearance."
    ;; Heading level font sizes
    (custom-set-faces
     '(org-level-1 ((t (:height 1.15))))
     '(org-level-2 ((t (:height 1.13))))
     '(org-level-3 ((t (:height 1.11))))
     '(org-level-4 ((t (:height 1.09))))
     '(org-level-5 ((t (:height 1.07))))
     '(org-level-6 ((t (:height 1.05))))
     '(org-level-7 ((t (:height 1.03))))
     '(org-level-8 ((t (:height 1.01))))
     '(org-tag ((t (:inherit 'fixed-pitch))))
     '(org-date ((t (:inherit 'fixed-pitch))))
     '(org-todo ((t (:inherit 'fixed-pitch))))
     '(org-done ((t (:inherit 'fixed-pitch))))
     '(org-drawer ((t (:inherit 'fixed-pitch))))
     '(org-ellipsis ((t (:inherit 'fixed-pitch))))
     '(org-property-value ((t (:inherit 'fixed-pitch))))
     '(org-special-keyword ((t (:inherit 'fixed-pitch))))
     '(org-headline-done ((t (:inherit 'variable-pitch)))))

    ;; List bullet beautification
    (with-eval-after-load 'org
      (setq line-spacing 0.25)
      (setq org-list-demote-modify-bullet
            '(("+" . "-") ("-" . "+") ("*" . "+") ("1." . "a."))))

    (font-lock-add-keywords
     'org-mode
     '(("^ +\\([-*]\\) "
        (0 (prog1 () (compose-region (match-beginning 1) (match-end 1) "â–»"))))))

    (mcg-log "Configured org appearance"))

#+END_SRC


** Org Superstar
#+BEGIN_SRC emacs-lisp
  ;;; Org Superstar

  (defun mcg-org-setup-superstar ()
    "Setup org-superstar heading beautification."
    (when (mcg-require-extension "org/org-superstar-mode" 'org-superstar)
      (setq org-superstar-leading-bullet ?\s
            org-superstar-special-todo-items t
            org-superstar-item-bullet-alist '((43 . "â—†") (45 . "â–¸"))
            org-superstar-headline-bullets-list '("â—‰" "â—‹" "âœ¸" "âœ¿" "âœ¤" "âœœ" "â—†" "â–¶"))

      (custom-set-faces
       '(org-superstar-item ((t (:inherit 'fixed-pitch))))
       '(org-superstar-header-bullet ((t (:height 232 :inherit 'fixed-pitch)))))

      (mcg-log "Configured org-superstar")))

#+END_SRC

** Org Appear
#+BEGIN_SRC emacs-lisp
  ;;; Org Appear

  (defun mcg-org-setup-appear ()
    "Setup org-appear auto-show markers."
    (when (mcg-require-extension "org/org-appear" 'org-appear)
      (mcg-log "Configured org-appear")))

#+END_SRC

** Org Modern
#+BEGIN_SRC emacs-lisp
  ;;; Org Modern

  (defun mcg-org-setup-modern ()
    "Setup org-modern modern interface."
    (when (and mcg-org-enable-org-modern
               (mcg-require-extension "org/org-modern" 'org-modern))
      ;; org-modern configuration
      (setq org-modern-star '("â—‰" "â—‹" "âœ¸" "âœ¿" "âœ¤" "âœœ" "â—†" "â–¶")
            org-modern-table-vertical 1
            org-modern-table-horizontal 0.2
            org-modern-list '((43 . "â—†") (45 . "â–¸") (42 . "â€¢"))
            org-modern-todo-faces
            '(("TODO" :inverse-video t :inherit org-todo)
              ("HOLD" :inverse-video t :inherit +org-todo-onhold)
              ("WIP" :inverse-video t :inherit +org-todo-active)
              ("WAIT" :inverse-video t :inherit +org-todo-onhold)
              ("DONE" :inverse-video t :inherit org-done)
              ("CANCELLED" :inverse-video t :inherit +org-todo-cancel))
            org-modern-priority-faces
            '((?A :inverse-video t :inherit org-priority)
              (?B :inverse-video t :inherit org-priority)
              (?C :inverse-video t :inherit org-priority))
            org-modern-block-fringe nil
            org-modern-block-name
            '((t . t)
              ("src" "Â»" "Â«")
              ("example" "Â»â€“" "â€“Â«")
              ("quote" "â" "â")))

      (mcg-log "Configured org-modern")))

#+END_SRC

** Org Download
#+BEGIN_SRC emacs-lisp
  ;;; Org Download

  (defun mcg-org-setup-download ()
    "Setup org-download image download."
    (when (mcg-require-extension "org/org-download" 'org-download)
      ;; Drag-and-drop to dired
      (add-hook 'dired-mode-hook 'org-download-enable)
      (add-hook 'org-mode-hook 'org-download-enable)

      (setq org-download-display-inline-images 'posframe)

      (mcg-log "Configured org-download")))

  (defun mcg/org-insert-clipboard-image (width)
    "Insert image from clipboard to Org file.
  WIDTH is image width, default 800."
    (interactive (list
                  (read-string (format "Input image width, default is 800: ")
                               nil nil "800")))
    ;; Set image folder location to `current Org file name.assets'
    (let* ((foldername (concat (file-name-base (buffer-file-name)) ".assets/"))
           (imgName (concat "img_" (format-time-string "%Y%m%d_%H%M%S") ".png"))
           (relativeFilename (concat (file-name-base (buffer-name)) ".assets/" imgName)))

      (unless (file-exists-p foldername)
        (mkdir foldername))

      ;; Set different command line tools based on operating system
      (cond
       ((eq system-type 'windows-nt)
        (setq org-download-screenshot-method (concat "magick clipboard: " relativeFilename)))
       ((eq system-type 'gnu/linux)
        (setq org-download-screenshot-method (concat "xclip -selection clipboard -t image/png -o > " relativeFilename)))
       ((eq system-type 'darwin)
        (setq org-download-screenshot-method (concat "pngpaste " relativeFilename))))

      ;; Add width attribute to pasted image links
      (insert (concat "\n#+DOWNLOADED: screenshot @ "
                      (format-time-string "%Y-%m-%d %a %H:%M:%S" (current-time))
                      "\n#+CAPTION: \n#+ATTR_ORG: :width "
                      width
                      "\n#+ATTR_LATEX: :width "
                      (if (>= (/ (string-to-number width) 800.0) 1.0)
                          "1.0"
                        (number-to-string (/ (string-to-number width) 800.0)))
                      "\\linewidth :float nil\n"
                      "#+ATTR_HTML: :width "
                      width
                      "\n[[file:" relativeFilename "]]\n"))
      (when (fboundp 'org-download-screenshot)
        (org-download-screenshot))))

#+END_SRC


** Visual Fill Column
#+BEGIN_SRC emacs-lisp
  ;;; Visual Fill Column

  (defun mcg-org-setup-visual-fill ()
    "Setup visual-fill-column."
    (when (and mcg-org-enable-visual-fill
               (mcg-require-extension "org/visual-fill-column" 'visual-fill-column))
      (setq visual-fill-column-width mcg-org-visual-fill-width)
      (mcg-log "Configured visual-fill-column")))

#+END_SRC

** Mixed Pitch
#+BEGIN_SRC emacs-lisp
  ;;; Mixed Pitch

  (defun mcg-org-setup-mixed-pitch ()
    "Setup mixed-pitch mixed fonts."
    (when (and mcg-org-enable-mixed-pitch
               (mcg-require-extension "org/mixed-pitch" 'mixed-pitch))
      ;; Font configuration (with availability check)
      (when (display-graphic-p)
        (let ((mono-font (cond
                          ((find-font (font-spec :name "FiraCode Nerd Font Mono"))
                           "FiraCode Nerd Font Mono")
                          ((find-font (font-spec :name "Consolas"))
                           "Consolas")
                          (t "monospace")))
              (serif-font (cond
                           ((find-font (font-spec :name "Noto Serif"))
                            "Noto Serif")
                           ((find-font (font-spec :name "Georgia"))
                            "Georgia")
                           (t "serif"))))
          (custom-set-faces
           `(default ((t (:font ,mono-font))))
           `(fixed-pitch ((t (:font ,mono-font :height 1.0))))
           `(variable-pitch ((t (:font ,serif-font :height 1.0)))))))
      (mcg-log "Configured mixed-pitch")))

#+END_SRC

** Chinese Calendar
#+BEGIN_SRC emacs-lisp
  ;;; Chinese Calendar

  (defun mcg-org-setup-chinese-calendar ()
    "Setup Chinese calendar."
    (when (and mcg-org-enable-chinese-calendar
               (mcg-require-extension "org/cal-china-x" 'cal-china-x))
      (with-eval-after-load 'calendar
        ;; Mark today
        (add-hook 'calendar-today-visible-hook 'calendar-mark-today)

        ;; Calendar basic settings
        (setq calendar-chinese-all-holidays-flag nil
              calendar-mark-holidays-flag t
              calendar-mark-diary-entries-flag nil
              calendar-time-zone-style 'numeric
              calendar-date-style 'iso)

        ;; Set Chinese celestial stems and terrestrial branches
        (setq calendar-chinese-celestial-stem
              ["ç”²" "ä¹™" "ä¸™" "ä¸" "æˆŠ" "å·±" "åºš" "è¾›" "å£¬" "ç™¸"])
        (setq calendar-chinese-terrestrial-branch
              ["å­" "ä¸‘" "å¯…" "å¯" "è¾°" "å·³" "åˆ" "æœª" "ç”³" "é…‰" "æˆŒ" "äº¥"])

        ;; Set Chinese month names
        (setq calendar-month-name-array
              ["ä¸€æœˆ" "äºŒæœˆ" "ä¸‰æœˆ" "å››æœˆ" "äº”æœˆ" "å…­æœˆ"
               "ä¸ƒæœˆ" "å…«æœˆ" "ä¹æœˆ" "åæœˆ" "åä¸€æœˆ" "åäºŒæœˆ"])

        ;; Set weekday header display
        (setq calendar-day-name-array
              ["æ—¥" "ä¸€" "äºŒ" "ä¸‰" "å››" "äº”" "å…­"])

        ;; Set Monday as first day of week
        (setq calendar-week-start-day 1))

      ;; Auto-initialize cal-china-x
      (add-hook 'after-init-hook 'cal-china-x-setup)

      (mcg-log "Configured Chinese calendar")))

#+END_SRC

** Prettify Symbols
#+BEGIN_SRC emacs-lisp
  ;;; Prettify Symbols

  (defun mcg/org-prettify-symbols ()
    "Setup Org mode symbol beautification."
    (setq prettify-symbols-alist
          (mapcan (lambda (x) (list x (cons (upcase (car x)) (cdr x))))
                  '(("#+begin_src"      . "â†ª")
                    ("#+end_src"        . "â†©")
                    ("#+begin_example"  . 129083)
                    ("#+end_example"    . 129081)
                    ("#+results:"       . 9776)
                    ("#+attr_latex:"    . "ğŸ„›")
                    ("#+attr_html:"     . "ğŸ„—")
                    ("#+attr_org:"      . "ğŸ„")
                    ("#+name:"          . "ğŸ„")
                    ("#+caption:"       . "ğŸ„’")
                    ("#+date:"          . "ğŸ“…")
                    ("#+author:"        . "ğŸ’")
                    ("#+setupfile:"     . 128221)
                    ("#+email:"         . 128231)
                    ("#+startup:"       . 10034)
                    ("#+options:"       . 9965)
                    ("#+title:"         . 10162)
                    ("#+subtitle:"      . 11146)
                    ("#+downloaded:"    . 8650)
                    ("#+language:"      . 128441)
                    ("#+begin_quote"    . 187)
                    ("#+end_quote"      . 171)
                    ("#+begin_results"  . 8943)
                    ("#+end_results"    . 8943)
                    (":PROPERTIES:"     . "â¥¼")
                    (":HEADER-ARGS:"    . "Ğ­")
                    (":END:"            . "â¥½"))))
    (setq prettify-symbols-unprettify-at-point t)
    (prettify-symbols-mode 1))

#+END_SRC


** Chinese-English Spacing
#+BEGIN_SRC emacs-lisp
  ;;; Chinese-English Spacing

  (defun mcg-org-setup-chinese-spacing ()
    "Setup Chinese-English mixed text spacing."
    ;; Fix spacing around Chinese markers
    (font-lock-add-keywords
     'org-mode
     '(("\\cc\\( \\)[/+*_=~][^a-zA-Z0-9]*?[/+*_=~]\\( \\)?\\cc?"
        (1 (prog1 () (compose-region (match-beginning 1) (match-end 1) ""))))
       ("\\cc?\\( \\)?[/+*_=~][^a-zA-Z0-9]*?[/+*_=~]\\( \\)\\cc"
        (2 (prog1 () (compose-region (match-beginning 2) (match-end 2) "")))))
     'append)

    (with-eval-after-load 'org
      (defun mcg-org--strip-ws-maybe (text _backend _info)
        "Handle Chinese-English spacing during export."
        (let* ((text (replace-regexp-in-string
                      "\\(\\cc\\) *\n *\\(\\cc\\)"
                      "\\1\\2" text))
               (text (replace-regexp-in-string
                      "\\(\\cc\\) \\(.*?\\) \\(\\cc\\)"
                      "\\1\\2\\3" text))
               (text (replace-regexp-in-string
                      "\\(\\cc\\)\\(\\(?:<[^>]+>\\)?[a-z0-9A-Z-]+\\(?:<[^>]+>\\)?\\)\\(\\cc\\)"
                      "\\1 \\2 \\3" text)))
          text))
      (add-to-list 'org-export-filter-paragraph-functions #'mcg-org--strip-ws-maybe))

    (mcg-log "Configured Chinese-English spacing"))

#+END_SRC

** Time Stamp Format
#+BEGIN_SRC emacs-lisp
  ;;; Time Stamp Format

  (defun mcg-org-setup-timestamp ()
    "Setup timestamp format."
    ;; Set timestamp format to [2025-12-08 Mon 10:21:23]
    (setq org-time-stamp-custom-formats
          '("<%Y-%m-%d %A %H:%M:%S>" . "<%Y-%m-%d %A %H:%M:%S>"))

    ;; Set Chinese weekday display
    (setq system-time-locale "zh_CN.UTF-8")

    ;; Use custom time format
    (setq org-display-custom-times t)

    (mcg-log "Configured timestamp format"))

#+END_SRC

** Export Configuration
#+BEGIN_SRC emacs-lisp
  ;;; Export Configuration

  (defun mcg-org-setup-export ()
    "Setup export configuration."
    (with-eval-after-load 'org
      (require 'ox-gfm nil t)
      (add-to-list 'org-export-backends 'md)
      (when (featurep 'ox-gfm)
        (add-to-list 'org-export-backends 'gfm)))

    (mcg-log "Configured org export"))

#+END_SRC

** Org Mode Hook
#+BEGIN_SRC emacs-lisp
  ;;; Org Mode Hook

  (defun mcg-org-mode-setup ()
    "Org mode initialization setup."
    (setq-local line-spacing 2)
    (visual-line-mode 1)

    ;; Enable features as needed
    (when mcg-org-enable-visual-fill
      (when (fboundp 'visual-fill-column-mode)
        (visual-fill-column-mode 1)))

    (when mcg-org-enable-mixed-pitch
      (when (fboundp 'mixed-pitch-mode)
        (mixed-pitch-mode 1)))

    ;; org-superstar
    (when (fboundp 'org-superstar-mode)
      (org-superstar-mode 1))

    ;; org-appear
    (when (fboundp 'org-appear-mode)
      (org-appear-mode 1))

    ;; org-modern
    (when (and mcg-org-enable-org-modern
               (fboundp 'org-modern-mode))
      (org-modern-mode 1))

    ;; Symbol beautification
    (when mcg-org-enable-pretty-symbols
      (mcg/org-prettify-symbols)))

#+END_SRC

** Commands
#+BEGIN_SRC emacs-lisp
  ;;; Commands

  (defun mcg/org-toggle-modern ()
    "Toggle org-modern mode."
    (interactive)
    (if (bound-and-true-p org-modern-mode)
        (org-modern-mode -1)
      (org-modern-mode 1))
    (message "Org-modern mode: %s"
             (if (bound-and-true-p org-modern-mode) "enabled" "disabled")))

  (defun mcg/org-toggle-pretty-symbols ()
    "Toggle symbol beautification."
    (interactive)
    (if prettify-symbols-mode
        (prettify-symbols-mode -1)
      (mcg/org-prettify-symbols))
    (message "Prettify symbols: %s"
             (if prettify-symbols-mode "enabled" "disabled")))

  (defun mcg/org-open-notes ()
    "Open notes directory."
    (interactive)
    (find-file mcg-org-notes-directory))

  (defun mcg/org-open-agenda-dir ()
    "Open agenda directory."
    (interactive)
    (find-file mcg-org-agenda-directory))

#+END_SRC

** Help Popup
#+BEGIN_SRC emacs-lisp
;;; Help Popup

(defun mcg/org-help ()
  "Show Org mode commands reference in posframe popup."
  (interactive)
  (mcg-popup-show "*Org Help*" (mcg--org-help-content) 55 38))

(defun mcg--org-help-content ()
  "Generate Org help content."
  "
                      Org Mode æ“ä½œé€ŸæŸ¥                    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  

    ã€åŸºæœ¬æ“ä½œã€‘ C-c n                                    
    C-c n c         Capture å¿«é€Ÿè®°å½•                      
    C-c n a         Agenda æ—¥ç¨‹è§†å›¾                       
    C-c n l         Store link å­˜å‚¨é“¾æ¥                   
    C-c n t         Todo list å¾…åŠåˆ—è¡¨                    

    ã€æ ‡é¢˜ä¸ç»“æ„ã€‘                                        
    M-RET           æ’å…¥åŒçº§æ ‡é¢˜                          
    M-S-RET         æ’å…¥ TODO æ ‡é¢˜                        
    M-LEFT/RIGHT    å‡çº§/é™çº§æ ‡é¢˜                         
    M-UP/DOWN       ä¸Šç§»/ä¸‹ç§»æ ‡é¢˜                         
    TAB             æŠ˜å /å±•å¼€                             
    S-TAB           å…¨å±€æŠ˜å /å±•å¼€                         

    ã€TODO çŠ¶æ€ã€‘                                         
    C-c C-t         åˆ‡æ¢ TODO çŠ¶æ€                        
    S-LEFT/RIGHT    å¿«é€Ÿåˆ‡æ¢çŠ¶æ€                          
    C-c C-s         è®¾ç½® SCHEDULED                        
    C-c C-d         è®¾ç½® DEADLINE                         

    ã€é“¾æ¥ä¸å›¾ç‰‡ã€‘                                        
    C-c C-l         æ’å…¥/ç¼–è¾‘é“¾æ¥                         
    C-c C-o         æ‰“å¼€é“¾æ¥                              
    C-c C-x C-v     æ˜¾ç¤º/éšè—å›¾ç‰‡                         

    ã€è¡¨æ ¼ã€‘                                              
    | å†…å®¹ |         åˆ›å»ºè¡¨æ ¼ (è¾“å…¥ | å TAB)             
    TAB             ä¸‹ä¸€å•å…ƒæ ¼                            
    S-TAB           ä¸Šä¸€å•å…ƒæ ¼                            
    C-c -           æ’å…¥æ°´å¹³çº¿                            

    ã€ä»£ç å—ã€‘                                            
    <s TAB          æ’å…¥ src ä»£ç å—                       
    C-c C-c         æ‰§è¡Œä»£ç å—                            
    C-c '           ç¼–è¾‘ä»£ç å—                            

    ã€å¯¼å‡ºã€‘                                              
    C-c C-e         å¯¼å‡ºèœå•                              
    C-c C-e h h     å¯¼å‡º HTML                             
    C-c C-e l p     å¯¼å‡º PDF (LaTeX)                      
")

(global-set-key (kbd "C-c n ?") #'mcg/org-help)

#+END_SRC

** Initialize
#+BEGIN_SRC emacs-lisp
  ;;; Initialize

  ;; åˆå§‹åŒ–ç›®å½•
  (mcg-org-initialize-directories)

  ;; è®¾ç½®åŸºç¡€é…ç½®
  (mcg-org-setup-basic)
  (mcg-org-setup-todo-keywords)
  (mcg-org-setup-appearance)
  (mcg-org-setup-timestamp)
  (mcg-org-setup-export)
  (mcg-org-setup-chinese-spacing)

  ;; è®¾ç½®æ‰©å±•åŠŸèƒ½
  (mcg-org-setup-superstar)
  (mcg-org-setup-appear)
  (mcg-org-setup-modern)
  (mcg-org-setup-download)
  (mcg-org-setup-visual-fill)
  (mcg-org-setup-mixed-pitch)
  (mcg-org-setup-chinese-calendar)

  ;; æ·»åŠ  hook
  (add-hook 'org-mode-hook #'mcg-org-mode-setup)

#+END_SRC

** Provide
#+BEGIN_SRC emacs-lisp
  (provide 'init-org)
  ;;; init-org.el ends here
#+END_SRC
