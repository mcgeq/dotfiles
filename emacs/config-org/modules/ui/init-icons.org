#+TITLE: Icons Module
#+AUTHOR: mcge
#+PROPERTY: header-args:emacs-lisp :tangle init-icons.el :lexical t

* Icons Module

本模块负责 MCG Emacs 的图标配置，包括：
- nerd-icons 配置
- nerd-icons-completion 集成

** File Header

#+begin_src emacs-lisp
;;; init-icons.el --- Nerd Icons Configuration for MCG Emacs -*- lexical-binding: t; -*-

;; Filename: init-icons.el
;; Description: Nerd icons configuration module
;; Author: mcge <mcgeq@outlook.com>
;; Copyright (C) 2024-2026, mcge, all rights reserved.
;; Create   Date: 2026-01-09
;; Version: 3.0
;; Keywords: icons, ui, nerd-icons
;; Compatibility: GNU Emacs 29.0+

;;; Commentary:
;;
;; Icons module for MCG Emacs configuration, responsible for:
;; - nerd-icons configuration
;; - nerd-icons-completion integration
;;
;; Module metadata:
;; :depends ()
;; :defer nil
;;
#+end_src

** Require

#+begin_src emacs-lisp
;;; Code:

;;; Dependencies

(require 'core-lib)
#+end_src

** Variables

图标相关的配置变量。

#+begin_src emacs-lisp
;;; Variables

(defvar mcg-ui-icon-font-family "FiraCode Nerd Font"
  "Icon font family name.")
#+end_src

** Nerd Icons Configuration

Nerd Icons 设置函数。

#+begin_src emacs-lisp
;;; Nerd Icons Configuration

(defun mcg-ui-setup-nerd-icons ()
  "Set up nerd-icons.
Path is already added to load-path by core-bootstrap's mcg-setup-load-path."
  (require 'nerd-icons nil t)
  
  (when (featurep 'nerd-icons)
    ;; Set icon font
    (setq nerd-icons-font-family mcg-ui-icon-font-family)
    
    ;; Load nerd-icons-completion
    (require 'nerd-icons-completion nil t)
    
    (when (featurep 'nerd-icons-completion)
      (nerd-icons-completion-mode 1)
      (add-hook 'marginalia-mode-hook #'nerd-icons-completion-marginalia-setup)
      (mcg-log "nerd-icons-completion configured")))
  
  (mcg-log "nerd-icons configured"))
#+end_src

** Initialize

模块初始化，设置图标。

#+begin_src emacs-lisp
;;; Initialize

;; Set up icons
(mcg-ui-setup-nerd-icons)
#+end_src

** Provide Feature

#+begin_src emacs-lisp
(provide 'init-icons)
;;; init-icons.el ends here
#+end_src
