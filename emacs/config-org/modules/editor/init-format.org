#+TITLE: Text Format Module
#+AUTHOR: mcge
#+PROPERTY: header-args:emacs-lisp :tangle init-format.el :lexical t

* Text Format Module

本模块负责 MCG Emacs 的文本格式化配置，包括：
- 自动在中英文之间添加空格（wraplish）

** File Header

#+begin_src emacs-lisp
;;; init-format.el --- Text Formatting Configuration for MCG Emacs -*- lexical-binding: t; -*-

;; Copyright (C) 2024-2026 MCG
;; Author: mcge <mcgeq@outlook.com>
;; Keywords: wraplish, chinese, spacing, format
;; Compatibility: GNU Emacs 29.0+

;;; Commentary:
;; Text formatting module for MCG Emacs, responsible for:
;; - Automatically adding spaces between Chinese and English text
#+end_src

** Require

#+begin_src emacs-lisp
;;; Code:

(require 'core-lib)
#+end_src

** Variables

wraplish 相关的配置变量。

#+begin_src emacs-lisp
;;; ============================================================
;;; Variables
;;; ============================================================

(defvar mcg-wraplish-modes
  '(markdown-mode-hook
    markdown-ts-mode-hook
    org-mode-hook
    prog-mode-hook)
  "List of modes to enable wraplish.")
#+end_src

** Configuration

wraplish 配置函数。

#+begin_src emacs-lisp
;;; ============================================================
;;; Configuration
;;; ============================================================

(defun mcg--setup-wraplish ()
  "Setup wraplish Chinese-English mixed text."
  (when (mcg-require-extension "wraplish" t)
    (dolist (hook mcg-wraplish-modes)
      (add-hook hook (lambda () (wraplish-mode 1))))
    (mcg-log "Configured wraplish")))
#+end_src

** Initialize

模块初始化。

#+begin_src emacs-lisp
;;; ============================================================
;;; Initialize
;;; ============================================================

(mcg--setup-wraplish)
#+end_src

** Provide Feature

#+begin_src emacs-lisp
(provide 'init-format)
;;; init-format.el ends here
#+end_src
