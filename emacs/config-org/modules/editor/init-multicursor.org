#+TITLE: Multi-cursor Module
#+AUTHOR: mcge
#+PROPERTY: header-args:emacs-lisp :tangle init-multicursor.el :lexical t

* Multi-cursor Module

本模块负责 MCG Emacs 的多光标编辑配置，包括：
- Markmacro 多光标编辑
- 矩形操作
- 符号和行标记

** File Header

#+begin_src emacs-lisp
;;; init-multicursor.el --- Multi-cursor editing for MCG Emacs -*- lexical-binding: t; -*-

;; Copyright (C) 2024-2026 MCG
;; Author: mcge <mcgeq@outlook.com>
;; Keywords: multicursor, markmacro, editing
;; Compatibility: GNU Emacs 29.0+

;;; Commentary:
;; Multi-cursor editing module for MCG Emacs configuration, responsible for:
;; - Markmacro multi-cursor editing
;; - Rectangle operations
;; - Symbol and line marking
#+end_src

** Require

#+begin_src emacs-lisp
;;; Code:

(require 'core-lib)
#+end_src

** Markmacro Configuration

Markmacro 多光标编辑配置。

#+begin_src emacs-lisp
;;; ============================================================
;;; Markmacro Configuration
;;; ============================================================

(defun mcg--setup-markmacro ()
  "Setup Markmacro multi-cursor editing."
  (when (mcg-require-extension "markmacro" t)
    ;; C-c m prefix
    (global-set-key (kbd "C-c m s") 'markmacro-rect-set)
    (global-set-key (kbd "C-c m d") 'markmacro-rect-delete)
    (global-set-key (kbd "C-c m r") 'markmacro-rect-replace)
    (global-set-key (kbd "C-c m i") 'markmacro-rect-insert)
    (global-set-key (kbd "C-c m c") 'markmacro-rect-mark-columns)
    (global-set-key (kbd "C-c m S") 'markmacro-rect-mark-symbols)
    (global-set-key (kbd "C-c m a") 'markmacro-apply-all)
    (global-set-key (kbd "C-c m e") 'markmacro-apply-all-except-first)
    
    ;; Super key shortcuts
    (global-set-key (kbd "s-/") 'markmacro-mark-words)
    (global-set-key (kbd "s-?") 'markmacro-mark-lines)
    (global-set-key (kbd "s-:") 'markmacro-mark-chars)
    (global-set-key (kbd "s-L") 'markmacro-mark-imenus)
    
    (mcg-log "Markmacro configured")))
#+end_src

** Initialize

模块初始化。

#+begin_src emacs-lisp
;;; ============================================================
;;; Initialize
;;; ============================================================

(mcg--setup-markmacro)
#+end_src

** Provide Feature

#+begin_src emacs-lisp
(provide 'init-multicursor)
;;; init-multicursor.el ends here
#+end_src
