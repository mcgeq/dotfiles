* init-which-key.el
:PROPERTIES:
:HEADER-ARGS: :tangle (concat temporary-file-directory "init-which-key.el") :lexical t
:END:

** Headers

#+BEGIN_SRC emacs-lisp
  ;;; init-which-key.el -- Config for Which Key -*- lexical-binding: t; -*-

  ;; Filename: init-which-key.el
  ;; Description: Config for Which Key - å¿«æ·é”®æç¤º
  ;; Author: mcge <mcgeq@outlook.com>
  ;; Copyright (C) 2024-2025, mcge, all rights reserved.
  ;; Create   Date: 2025-12-09 20:00:00
  ;; Version: 1.0
  ;; Modified   By: mcgeq <mcgeq@outlook.com>
  ;; Last Modified: <2025-12-09 Mon 20:00>
  ;; Keywords: keybindings, help
  ;; Compatibility: GNU Emacs 31.0.50

  ;;; Commentary:
  ;;
  ;; Which-key æ˜¾ç¤ºå½“å‰å¯ç”¨çš„å¿«æ·é”®
  ;; å½“ä½ æŒ‰ä¸‹ä¸€ä¸ªå‰ç¼€é”®åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªçª—å£æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„åç»­é”®
  ;;

#+END_SRC

** Require
#+BEGIN_SRC emacs-lisp
;;; Require:
(require 'which-key)

#+END_SRC

** Configuration
#+BEGIN_SRC emacs-lisp
;;; Code:

;; å¯ç”¨ which-key
(add-hook 'after-init-hook #'which-key-mode)

;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;; åŸºç¡€è®¾ç½®
;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

;; æ˜¾ç¤ºå»¶è¿Ÿ (ç§’)
(setq which-key-idle-delay 0.3)

;; æ¬¡è¦å»¶è¿Ÿ (è¿ç»­æŒ‰é”®æ—¶çš„å»¶è¿Ÿ)
(setq which-key-idle-secondary-delay 0.05)

;; å¼¹å‡ºçª—å£ä½ç½®: bottom, top, left, right, frame
(setq which-key-popup-type 'side-window)
(setq which-key-side-window-location 'bottom)

;; çª—å£æœ€å¤§é«˜åº¦ (è¡Œæ•°æ¯”ä¾‹)
(setq which-key-side-window-max-height 0.3)

;; çª—å£æœ€å¤§å®½åº¦
(setq which-key-side-window-max-width 0.4)

;; çª—å£æœ€å°é«˜åº¦
(setq which-key-min-display-lines 6)

;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;; å¤–è§‚ç¾åŒ–
;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

;; æ’åºæ–¹å¼: æŒ‰é”®åå­—æ¯æ’åº
(setq which-key-sort-order 'which-key-key-order-alpha)

;; å…è®¸åˆ†é¡µæ˜¾ç¤ºæ›´å¤šå†…å®¹
(setq which-key-allow-multiple-replacements t)
(setq which-key-allow-imprecise-window-fit nil)

;; æ˜¾ç¤ºå‰ç¼€æè¿°ä½ç½®
(setq which-key-show-prefix 'left)

;; ç¾åŒ–åˆ†éš”ç¬¦ (ä½¿ç”¨ç®­å¤´)
(setq which-key-separator "  ")

;; ç‰¹æ®Šé”®åæ›¿æ¢ (æ›´æ˜“è¯»çš„å›¾æ ‡/ç¬¦å·)
(setq which-key-special-keys '("SPC" "TAB" "RET" "DEL" "ESC"))

;; é”®åç¾åŒ–æ›¿æ¢
(setq which-key-key-replacement-alist
      '(("<left>"  . "â†")
        ("<right>" . "â†’")
        ("<up>"    . "â†‘")
        ("<down>"  . "â†“")
        ("<return>" . "â")
        ("<tab>"   . "â‡¥")
        ("<escape>" . "â‹")
        ("<backspace>" . "âŒ«")
        ("<delete>" . "âŒ¦")
        ("SPC"     . "â£")
        ("RET"     . "â")
        ("TAB"     . "â‡¥")
        ("DEL"     . "âŒ«")))

;; æ·»åŠ å›¾æ ‡åˆ°å‘½ä»¤æè¿° (éœ€è¦ nerd-icons æˆ– all-the-icons)
(setq which-key-add-column-padding 2)
(setq which-key-max-description-length 32)
(setq which-key-ellipsis "..")

;; Unicode ç¾åŒ–è¾¹æ¡†
(setq which-key-unicode-correction 3)

;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
;; è‡ªå®šä¹‰å¤–è§‚ (Face)
;; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

;; æŒ‰é”®æ ·å¼
(custom-set-faces
 '(which-key-key-face
   ((t (:foreground "#7aa2f7" :weight bold))))  ; è“è‰²ç²—ä½“
 '(which-key-separator-face
   ((t (:foreground "#565f89"))))               ; ç°è‰²åˆ†éš”ç¬¦
 '(which-key-note-face
   ((t (:foreground "#9ece6a"))))               ; ç»¿è‰²æ³¨é‡Š
 '(which-key-command-description-face
   ((t (:foreground "#c0caf5"))))               ; æµ…è‰²å‘½ä»¤æè¿°
 '(which-key-group-description-face
   ((t (:foreground "#bb9af7" :weight bold))))) ; ç´«è‰²ç»„æè¿°

#+END_SRC

** Prefix Descriptions
#+BEGIN_SRC emacs-lisp
;;; å‰ç¼€æè¿° (å¸¦å›¾æ ‡)

;; ä¸ºå¸¸ç”¨å‰ç¼€æ·»åŠ æè¿° (ä½¿ç”¨ emoji/ç¬¦å·ç¾åŒ–)
(which-key-add-key-based-replacements
  ;; C-c å‰ç¼€ç»„
  "C-c"     "âš™ User"
  "C-c g"   " Git"
  "C-c g b" "  Branch"
  "C-c g r" "  Remote"
  "C-c g m" "  Submodule"
  "C-c g F" "  File"
  "C-c m"   "âœ Markmacro"
  "C-c n"   "ğŸ“ Notes/Org"
  "C-c r"   "ğŸ”§ Refactor"
  "C-c s"   "ğŸ” Search"
  "C-c t"   "ğŸ“‘ Tabs"
  "C-c u"   "â†© Undo"
  "C-c y"   "âœ‚ Snippet"
  "C-c f"   "ğŸ“ Files"
  "C-c w"   "ğŸªŸ Window"
  "C-c w w" "  Switch"
  "C-c w d" "  Delete"
  "C-c w s" "  Swap"
  "C-c w m" "  Move"
  "C-c w o" "  Only (delete others)"
  "C-c w v" "  Split Vertical"
  "C-c w h" "  Split Horizontal"
  
  ;; æ ‡å‡†å‰ç¼€
  "C-x"     "ğŸ“‹ Emacs"
  "C-x r"   "ğŸ“Œ Register"
  "C-x p"   "ğŸ“¦ Project"
  "C-x 4"   "ğŸªŸ Other Window"
  "C-x 5"   "ğŸ–¼ Frame"
  "C-h"     "â“ Help"
  "M-g"     "â¡ Goto"
  "M-g w"   "  Word (avy)"
  "M-g g"   "  Line (avy)"
  "M-g c"   "  Char timer (avy)"
  "M-g j"   "  Char in line (avy)"
  "M-g y"   "  Copy line (avy)"
  "M-g m"   "  Move line (avy)"
  "M-g k"   "  Kill line (avy)"
  "M-s"     "ğŸ” Search")

#+END_SRC

** Performance
#+BEGIN_SRC emacs-lisp
;;; æ€§èƒ½ä¼˜åŒ–

;; ç¦ç”¨æŸäº›æ¨¡å¼ä¸‹çš„ which-key (å¦‚ minibuffer)
(setq which-key-allow-evil-operators nil)
(setq which-key-show-remaining-keys nil)

;; å‡å°‘æ›´æ–°é¢‘ç‡
(setq which-key-compute-remaps nil)

#+END_SRC

** Ends
#+BEGIN_SRC emacs-lisp
(provide 'init-which-key)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;; init-which-key.el ends here
#+END_SRC
